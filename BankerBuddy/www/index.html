<!doctype html>
<html lang="en" ng-app="app">
<head>
  <meta charset="utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Banker Buddy</title>
  <script type="text/javascript" charset="utf-8">
  // Wait for Cordova to load
  //
  document.addEventListener("deviceready", onDeviceReady, false);

  // Cordova is ready
  //
  function onDeviceReady() {
	var db = window.openDatabase("BankerBuddy", "1.0", "Test DB", 3000000);
	db.transaction(CreateDatabase, errorDB, successDB);
  }
  
  function CreateDatabase(tx) {
	tx.executeSql("CREATE TABLE IF NOT EXISTS Users (ID INT PRIMARY KEY, Username TEXT, Pin INT, Threshold REAL);");
	tx.executeSql("CREATE TABLE IF NOT EXISTS BalanceHistory (ID INT, Timestamp TEXT, Balance REAL);");
	tx.executeSql("CREATE TABLE IF NOT EXISTS Deposit (ID INT, Timestamp TEXT, Balance REAL);");
	tx.executeSql("CREATE TABLE IF NOT EXISTS Withdraw (ID INT, Timestamp TEXT, Balance REAL);");
	//tx.executeSql("INSERT INTO Users VALUES(1, 'DavidRoberts', 1234, 100.0);");
  }
  
  function errorDB(error) {
	alert("Database Error : " + error);
  }
  
  function successDB() {
  }
  
  </script>

  <link rel="stylesheet" href="lib/onsen/css/onsenui.css">  
  <link rel="stylesheet" href="lib/onsen/css/onsen-css-components.css">  
  <link rel="stylesheet" href="styles/app.css"/>

  <script src="lib/onsen/js/angular/angular.js"></script>    
  <script src="lib/onsen/js/onsenui.js"></script>    

  <script src="cordova.js"></script>

  <script>
    var module = angular.module('app', ['onsen']);
	
	module.factory('QueryService', function(){
	
		function queryDatabase($string){
			var db = window.openDatabase("BankerBuddy", "1.0", "Test DB", 3000000);
			db.transaction(queryDB, errorDB);
			var table = [];
			
			function queryDB(tx){
				tx.executeSql($string, [], querySelectSuccess, errorQ);
			}
	
			function errorDB(error){
				alert("Database Error: " + error);
			}
			
			function errorQ(error){
				alert("Error processing SQL : " + error);
			}
			
			function querySelectSuccess(tx, results){
				for (var i = 0; i < results.rows.length; i++){
					//table.push(results.rows.item(i).Username);
					//alert(results.rows.item(i).Username + " tst");
				}
			}
			
			//alert(table);
		}
		
		return{
			queryDatabase : queryDatabase
		}
	});		
	
	module.controller('loginCtrl', function($scope, QueryService){
	
		$scope.username = "";
		$scope.pin = "";
	
		$scope.validateLogin = function(){
			if($scope.username == ""){
				alert("Please Enter a Username.");
			}
			else if($scope.pin == ""){
				alert("Please Enter a Pin.");
			}
			else {			
				QueryService.queryDatabase("SELECT ID FROM Users WHERE Username = '" + $scope.username + "';");
				myNavigator.pushPage('app.html', { animation : 'fade' } );
			}
		}		
	});

  </script>


  <style>
    .page--menu-page__content {
      background-color: #333;
      color: white;
    }
	
	.page--login__content {
		background-color: #d3d3d3;
	}

    .menu-close,
    .menu-close > .toolbar-button {
      color: #999;
    }

    .menu-list,
    .menu-item:first-child,
    .menu-item:last-child,
    .menu-item {
      background-color: transparent;
      background-image: none !important;
      border-color: transparent;
      color: #fff;
    }

    .menu-item {
      padding: 0 0 0 20px;
      line-height: 52px;
      height: 52px;
      text-shadow: rgba(0, 0, 0, 0.4) 0px 1px 0px;
    }

    .menu-item:active {
      background-color: rgba(255, 255, 255, 0.1);
    }

    .menu-notification {
      display: inline-block;
      margin-top: 12px;
      font-size: 14px;
      height: 16px;
      line-height: 16px;
      min-width: 16px;
      font-weight: 600;
    }

    .bottom-menu-list,
    .bottom-menu-item:first-child,
    .bottom-menu-item:last-child,
    .bottom-menu-item {
      border-color: #393939;
      background-color: transparent;
      background-image: none !important;
      color: #ccc;
    }

    .bottom-menu-item:active {
      background-color: rgba(255, 255, 255, 0.1);
    }
  </style>
  
</head>

<body> 

<ons-navigator title="Navigator" var="myNavigator">
	<ons-page>
		<div style="background-color: #333" >
		</div>
		<script>
			setTimeout(function(){myNavigator.pushPage('splash.html',{ animation : 'fade'})}, 100);
		</script>
	</ons-page>
	
	<ons-template id="splash.html">
		<ons-page>
			<div style="width: 100%; height:100%">
				<img src="img\BankerBuddy_Splash_alt_green.png" style="width: 100%; height:100%">
			</div>
			<script>
			setTimeout(function(){myNavigator.pushPage('login.html',{ animation : 'fade'})}, 3000);
			</script>
		</ons-page>
	</ons-template>

</ons-navigator>
	
	<ons-template id="login.html">
		<ons-page modifier="login">
		
			<div style="background-color:white; margin-top:5%; margin-left:auto; margin-right:auto; text-align: center; height:400px; width:90%; border:3px inset #808080" ng-controller="loginCtrl">
				<img src="img\icon.png" style="width: 50%; margin-top:10%">
				<div style="margin-top:10%">
					<ons-icon icon="ion-android-social-user"></ons-icon>
					<input type="text" class="text-input" placeholder="Username" ng-model="username">
				</div>
				<div style="margin-top:1%">
					<ons-icon icon="ion-pound"></ons-icon>
					<input type="tel"  class="text-input" placeholder="Pin" ng-model="pin">
				</div> 
				<br>
				<ons-button modifier="outline" ng-click="validateLogin()">
				Sign In
				</ons-button>
			</div>
			<ons-col align="center">
				<ons-button modifier="quiet" onclick="myNavigator.pushPage('create.html', { animation : 'fade' } )">
				Create Account
				</ons-button>
			</ons-col>
		</ons-page>
	</ons-template>

	<ons-template id="create.html">
		<ons-page>
			<div style="margin-top:6%; margin-left:auto; margin-right:auto; text-align: center; height:320px; width:90%">
				<img src="img\icon.png" style="width: 50%; margin-top:10%">
				<div style="margin-top:10%">
					<ons-icon icon="ion-edit"></ons-icon>
					<input type="text" class="text-input" placeholder="Username" ng-model="username">
				</div>
				<div style="margin-top:1%">
					<ons-icon icon="ion-email"></ons-icon>
					<input type="text" class="text-input" placeholder="Email" ng-model="email">
				</div>  
				<div style="margin-top:1%">
					<ons-icon icon="ion-pound"></ons-icon>
					<input type="password" class="text-input" placeholder="Pin" ng-model="pin">
				</div> 
				<div style="margin-top:1%">
					<ons-icon icon="ion-pound"></ons-icon>
					<input type="password" class="text-input" placeholder="Confirm Pin" ng-model="confirmpin">
				</div> 
				<br>
				<ons-button modifier="outline" onclick="myNavigator.pushPage('balance.html', { animation : 'slide' } )">
					<ons-icon icon="ion-chevron-right" size="40px"></ons-icon>
				</ons-button>
			</div>
		</ons-page>	
	</ons-template>

	<ons-template id="balance.html">
		<ons-page>
			<div style="margin-top:6%; margin-left:auto; margin-right:auto; text-align: center; height:320px; width:90%">
				<img src="img\icon.png" style="width: 50%; margin-top:10%">
				<div style="margin-top:10%">
					<ons-icon icon="ion-social-usd-outline"></ons-icon>
					<input type="password" class="text-input" placeholder="Balance" ng-model="balance">
				</div> 
				<div style="margin-top:1%">
					<ons-icon icon="ion-stats-bars"></ons-icon>
					<input type="password" class="text-input" placeholder="Threshold" ng-model="threshold">
				</div> 
				<br>
				<ons-button modifier="outline" onclick="myNavigator.pushPage('app.html', { animation : 'fade' } )">
					<ons-icon icon="ion-android-add" size="40px"></ons-icon>
				</ons-button>
			</div>
		</ons-page>	
	</ons-template>
	
	<ons-template id="app.html">
		<ons-sliding-menu
			menu-page="menu.html" main-page="page0.html" side="left"
			var="menu" type="reveal" max-slide-distance="260px" swipable="true">
		</ons-sliding-menu>
    </ons-template>
	
	<ons-template id="menu.html">
		<ons-page modifier="menu-page">
			<ons-toolbar modifier="transparent"></ons-toolbar>

			<ons-list class="menu-list">
				<ons-list-item class="menu-item" ng-click="menu.setMainPage('page0.html', {closeMenu: true})">
					<ons-icon icon="ion-home"></ons-icon>
					Home
				</ons-list-item>
				
			<ons-list class="menu-list">
				<ons-list-item class="menu-item" ng-click="menu.setMainPage('page1.html', {closeMenu: true})">
					<ons-icon icon="ion-plus"></ons-icon>
					Deposit
				</ons-list-item>

				<ons-list-item class="menu-item" ng-click="menu.setMainPage('page2.html', {closeMenu: true})">
					<ons-icon icon="ion-minus"></ons-icon>
					Withdraw
				</ons-list-item>

				<ons-list-item class="menu-item" ng-click="menu.setMainPage('page3.html', {closeMenu: true})">
					<ons-icon icon="ion-arrow-graph-up-right"></ons-icon>
					Visualization
				</ons-list-item>
			</ons-list>

		  <br>

			<ons-list class="bottom-menu-list">
				<ons-list-item class="bottom-menu-item" ng-click="menu.setMainPage('page4.html', {closeMenu: true})">
				Settings
				</ons-list-item>

				<ons-list-item class="bottom-menu-item" ng-click="menu.setMainPage('page5.html', {closeMenu: true})">
				Help
				</ons-list-item>

				<ons-list-item class="bottom-menu-item" ng-click="menu.setMainPage('page6.html', {closeMenu: true})">
				Send feedback
				</ons-list-item>
			</ons-list>
		</ons-page>
	</ons-template>

	<ons-template id="page0.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Home</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	</ons-template>


	<ons-template id="page1.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Deposit</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	</ons-template>

	<ons-template id="page2.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Withdraw</div>
			</ons-toolbar>


			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
				</ons-col>
			</ons-row>

		</ons-page>
	</ons-template>
	 
	<ons-template id="page3.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Visualization</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	 </ons-template>

	<ons-template id="page4.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Settings</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	</ons-template>

	<ons-template id="page5.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Help</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	</ons-template>

	<ons-template id="page6.html">
		<ons-page>
			<ons-toolbar>
				<div class="left">
				<ons-toolbar-button ng-click="menu.toggle()">
					<ons-icon icon="ion-navicon" size="28px" fixed-width="false"></ons-icon>
				</ons-toolbar-button>
				</div>
				<div class="center">Send Feedback</div>
			</ons-toolbar>

			<ons-row style="margin-top: 100px;">
				<ons-col align="center">
					<ons-button modifier="light" ng-click="menu.toggleMenu()">
					Toggle Menu
					</ons-button>
					<p style="color: #999; font-size: 13px;">Click "Toggle Menu" to close/open menu,<br> You can also swipe the page left/right.</p>
				</ons-col>
			</ons-row>
		</ons-page>
	</ons-template

</body>
</html>
